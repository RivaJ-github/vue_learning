(()=>{let e;const t=new WeakMap;function n(t){const n=()=>{!function(e){for(let t=0;t<e.deps.length;t++)e.deps[t].delete(e);e.deps.length=0}(n),e=n,t()};n.deps=[],n()}const o=new Proxy({foo:!0,bar:!0},{get:(n,o)=>(function(n,o){if(!e)return;let f=t.get(n);f||t.set(n,f=new Map);let c=f.get(o);c||f.set(o,c=new Set),c.add(e),e.deps.push(c)}(n,o),n[o]),set(e,n,o){e[n]=o,function(e,n){const o=t.get(e);if(!o)return;const f=o.get(n);new Set(f).forEach((e=>e()))}(e,n)}});let f,c;n((function(){console.log("effectFn1执行"),n((function(){console.log("effectFn2执行"),c=o.bar})),f=o.foo})),o.foo=!1})();